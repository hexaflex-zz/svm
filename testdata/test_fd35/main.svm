;
; svm-fdd -new .\testdata\fdd.img
; svm-asm -import "testdata" -out "testdata\test.a" -debug test_fd35
; svm.exe -debug -fdd-img .\testdata\fdd.img .\testdata\test.a
;

import fdd, "fd35"

:main {
    hwa fddIndex, $16#fffe, $16#0004
    jez $exit

    mov r0, $fdd.ReadState
    int fddIndex
    ceq r1, $fdd.ErrorNone
    jez $exit

    mov r0, $fdd.WriteSector
    mov r1, $19
    mov r2, $data
    int fddIndex

:exit
    halt
}

:fddIndex d16 0
:data
    d64 16#1a2b3c4d5e6f7a8b
